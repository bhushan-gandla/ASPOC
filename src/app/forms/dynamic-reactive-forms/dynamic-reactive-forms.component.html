<div class="container pt-5">
    <form [formGroup]="myForm" (ngSubmit)="onSubmit()">
        <div class="card">
            <div class="card-header">
                <h4 class="card-title">Reactive Dynamic Form</h4>
            </div>
            <div class="card-body">
                <div class="row">
                    <ng-container *ngFor="let rootQuestion of formQuestions; index as i">
                        
                        <ng-container *ngIf="['text', 'date', 'number'].includes(rootQuestion.uiControlType)">
                            <div class="col-md-4 mb-4">
                                <label [ngClass]="rootQuestion.isRequired? 'required-field' : '' ">{{rootQuestion.questionText}} - {{rootQuestion.questionId}}  </label>
                                <input class="form-control" [ngClass]="myForm.get(rootQuestion.questionId).invalid? 'is-invalid' : '' "  [type]="rootQuestion.uiControlType" [formControlName]="rootQuestion.questionId">
                                <div class="invalid-feedback d-block" *ngIf="myForm.get(rootQuestion.questionId).invalid">Please fill out this field.</div>
                            </div>
                        </ng-container>
                        <ng-container *ngIf="rootQuestion.uiControlType === 'radio'">
                            <div class="col-md-4 mb-4">
                                <label [ngClass]="rootQuestion.isRequired? 'required-field' : '' ">{{rootQuestion.questionText}} - {{rootQuestion.questionId}}</label>
                                <ng-container  *ngFor="let radioQuestion of rootQuestion.answers">
                                    <div class="form-check form-check-inline">
                                        <input type="radio" [id]="radioQuestion.answerId" [formControlName]="rootQuestion.questionId" [value]="radioQuestion.answerText" (change)="onRadioButtonChange(i, rootQuestion.answers, radioQuestion.answerId)" class="form-check-input">
                                        <label [for]="radioQuestion.answerId"  class="form-check-label">
                                            <!-- {{radioQuestion.isChosenAnswer}} -->
                                            {{radioQuestion.answerText}}
                                        </label>
                                      </div>
                                </ng-container>
                                <div class="invalid-feedback d-block" *ngIf="myForm.get(rootQuestion.questionId).invalid">Please fill out this field.</div>
                            </div>
                        </ng-container>
                    </ng-container>
                </div>
            </div>
            <div class="card-footer">
                <button class="btn btn-primary" type="submit" >Submit</button>
                {{myForm.invalid}}
            </div>
        </div>
    </form>
</div>
